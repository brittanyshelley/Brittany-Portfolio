function t(t,e,a,o){Object.defineProperty(t,e,{get:a,set:o,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire6158;e.register("bbgOK",(function(a,o){t(a.exports,"drawGif",(()=>h)),t(a.exports,"loadGifImage",(()=>g));var i=e("2skY0"),r=e("2sCS3");const s=0,n=0;function l(t,e){const a=[];for(let o=0;o<e;o++)a.push({r:t.data[t.pos],g:t.data[t.pos+1],b:t.data[t.pos+2]}),t.pos+=3;return a}async function c(t,e,a,o,r,s){switch(t.nextByte()){case 59:return!0;case 44:await async function(t,e,a,o,r,s){const n=e.frames[o(!0)];n.left=t.nextTwoBytes(),n.top=t.nextTwoBytes(),n.width=t.nextTwoBytes(),n.height=t.nextTwoBytes();const c=t.nextByte(),h=128==(128&c),g=64==(64&c);n.sortFlag=32==(32&c),n.reserved=(24&c)>>>3;const f=1<<1+(7&c);h&&(n.localColorTable=l(t,f));const d=t=>{const{r:o,g:i,b:s}=(h?n.localColorTable:e.globalColorTable)[t];return t!==r(null)?{r:o,g:i,b:s,a:255}:{r:o,g:i,b:s,a:a?~~((o+i+s)/3):0}},p=(()=>{try{return new ImageData(n.width,n.height,{colorSpace:"srgb"})}catch(t){if(t instanceof DOMException&&"IndexSizeError"===t.name)return null;throw t}})();if(null==p)throw new EvalError("GIF frame size is to large");const u=t.nextByte(),w=t.readSubBlocksBin(),m=1<<u,b=(t,e)=>{const a=t>>>3,o=7&t;return(w[a]+(w[a+1]<<8)+(w[a+2]<<16)&(1<<e)-1<<o)>>>o};if(g){for(let a=0,r=u+1,l=0,c=[[0]],h=0;h<4;h++){if(i.InterlaceOffsets[h]<n.height){let t=0,e=0,o=!1;for(;!o;){const s=a;if(a=b(l,r),l+=r+1,a===m){r=u+1,c.length=m+2;for(let t=0;t<c.length;t++)c[t]=t<m?[t]:[]}else{a>=c.length?c.push(c[s].concat(c[s][0])):s!==m&&c.push(c[s].concat(c[a][0]));for(const o of c[a]){const{r:a,g:r,b:s,a:l}=d(o);p.data.set([a,r,s,l],i.InterlaceOffsets[h]*n.width+i.InterlaceSteps[h]*e+t%(4*n.width)),t+=4}c.length===1<<r&&r<12&&r++}t===4*n.width*(e+1)&&(e++,i.InterlaceOffsets[h]+i.InterlaceSteps[h]*e>=n.height&&(o=!0))}}s?.(t.pos/(t.data.length-1),o(!1)+1,p,{x:n.left,y:n.top},{width:e.width,height:e.height})}n.image=p,n.bitmap=await createImageBitmap(p)}else{let a=0,i=u+1,r=0,l=-4,c=!1;const h=[[0]];for(;!c;){const t=a;if(a=b(r,i),r+=i,a===m){i=u+1,h.length=m+2;for(let t=0;t<h.length;t++)h[t]=t<m?[t]:[]}else{if(a===m+1){c=!0;break}a>=h.length?h.push(h[t].concat(h[t][0])):t!==m&&h.push(h[t].concat(h[a][0]));for(const t of h[a]){const{r:e,g:a,b:o,a:i}=d(t);p.data.set([e,a,o,i],l+=4)}h.length>=1<<i&&i<12&&i++}}n.image=p,n.bitmap=await createImageBitmap(p),s?.((t.pos+1)/t.data.length,o(!1)+1,n.image,{x:n.left,y:n.top},{width:e.width,height:e.height})}}(t,e,a,o,r,s);break;case 33:!function(t,e,a,o){switch(t.nextByte()){case 249:{const i=e.frames[a(!1)];t.pos++;const r=t.nextByte();i.GCreserved=(224&r)>>>5,i.disposalMethod=(28&r)>>>2,i.userInputDelayFlag=2==(2&r);const s=1==(1&r);i.delayTime=10*t.nextTwoBytes();const n=t.nextByte();s&&o(n),t.pos++;break}case 255:{t.pos++;const a={identifier:t.getString(8),authenticationCode:t.getString(3),data:t.readSubBlocksBin()};e.applicationExtensions.push(a);break}case 254:e.comments.push([a(!1),t.readSubBlocks()]);break;case 1:if(0===e.globalColorTable.length)throw new EvalError("plain text extension without global color table");t.pos++,e.frames[a(!1)].plainTextData={left:t.nextTwoBytes(),top:t.nextTwoBytes(),width:t.nextTwoBytes(),height:t.nextTwoBytes(),charSize:{width:t.nextTwoBytes(),height:t.nextTwoBytes()},foregroundColor:t.nextByte(),backgroundColor:t.nextByte(),text:t.readSubBlocks()};break;default:t.skipSubBlocks()}}(t,e,o,r);break;default:throw new EvalError("undefined block found")}return!1}function h(t){const{context:e,radius:a,particle:o,delta:i}=t,r=o.image;if(!r?.gifData||!r.gif)return;const l=new OffscreenCanvas(r.gifData.width,r.gifData.height),c=l.getContext("2d");if(!c)throw new Error("could not create offscreen canvas context");c.imageSmoothingQuality="low",c.imageSmoothingEnabled=!1,c.clearRect(s,n,l.width,l.height),void 0===o.gifLoopCount&&(o.gifLoopCount=r.gifLoopCount??0);let h=o.gifFrame??0;const g={x:.5*-r.gifData.width,y:.5*-r.gifData.height},f=r.gifData.frames[h];if(void 0===o.gifTime&&(o.gifTime=0),f.bitmap){switch(e.scale(a/r.gifData.width,a/r.gifData.height),f.disposalMethod){case 4:case 5:case 6:case 7:case 0:c.drawImage(f.bitmap,f.left,f.top),e.drawImage(l,g.x,g.y),c.clearRect(s,n,l.width,l.height);break;case 1:c.drawImage(f.bitmap,f.left,f.top),e.drawImage(l,g.x,g.y);break;case 2:c.drawImage(f.bitmap,f.left,f.top),e.drawImage(l,g.x,g.y),c.clearRect(s,n,l.width,l.height),r.gifData.globalColorTable.length?c.putImageData(r.gifData.backgroundImage,g.x,g.y):c.putImageData(r.gifData.frames[0].image,g.x+f.left,g.y+f.top);break;case 3:{const t=c.getImageData(s,n,l.width,l.height);c.drawImage(f.bitmap,f.left,f.top),e.drawImage(l,g.x,g.y),c.clearRect(s,n,l.width,l.height),c.putImageData(t,s,n)}}if(o.gifTime+=i.value,o.gifTime>f.delayTime){if(o.gifTime-=f.delayTime,++h>=r.gifData.frames.length){if(--o.gifLoopCount<=0)return;h=0,c.clearRect(s,n,l.width,l.height)}o.gifFrame=h}e.scale(r.gifData.width/a,r.gifData.height/a)}}async function g(t){if("gif"===t.type){t.loading=!0;try{t.gifData=await async function(t,e,a){a||(a=!1);const o=await fetch(t);if(!o.ok&&404===o.status)throw new EvalError("file not found");const i=await o.arrayBuffer(),s={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},n=new(0,r.ByteStream)(new Uint8ClampedArray(i));if("GIF89a"!==n.getString(6))throw new Error("not a supported GIF file");s.width=n.nextTwoBytes(),s.height=n.nextTwoBytes();const h=n.nextByte(),g=128==(128&h);s.colorRes=(112&h)>>>4,s.sortFlag=8==(8&h);const f=1<<1+(7&h),d=n.nextByte();s.pixelAspectRatio=n.nextByte(),0!==s.pixelAspectRatio&&(s.pixelAspectRatio=(s.pixelAspectRatio+15)/64),g&&(s.globalColorTable=l(n,f));const p=(()=>{try{return new ImageData(s.width,s.height,{colorSpace:"srgb"})}catch(t){if(t instanceof DOMException&&"IndexSizeError"===t.name)return null;throw t}})();if(null==p)throw new Error("GIF frame size is to large");const{r:u,g:w,b:m}=s.globalColorTable[d];p.data.set(g?[u,w,m,255]:[0,0,0,0]);for(let t=4;t<p.data.length;t*=2)p.data.copyWithin(t,0,t);s.backgroundImage=p;let b=-1,y=!0,x=-1;const B=t=>(t&&(y=!0),b),T=t=>(null!=t&&(x=t),x);try{do{y&&(s.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),b++,x=-1,y=!1)}while(!await c(n,s,a,B,T,e));s.frames.length--;for(const t of s.frames){if(t.userInputDelayFlag&&0===t.delayTime){s.totalTime=1/0;break}s.totalTime+=t.delayTime}return s}catch(t){if(t instanceof EvalError)throw new Error(`error while parsing frame ${b} "${t.message}"`);throw t}}(t.source),t.gifLoopCount=function(t){for(const e of t.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}(t.gifData)??0,t.gifLoopCount||(t.gifLoopCount=1/0)}catch{t.error=!0}t.loading=!1}else{const{loadImage:a}=await Promise.resolve(e("asyfB"));await a(t)}}})),e.register("2skY0",(function(e,a){t(e.exports,"InterlaceOffsets",(()=>o)),t(e.exports,"InterlaceSteps",(()=>i));const o=[0,4,2,1],i=[8,8,4,2]})),e.register("2sCS3",(function(e,a){t(e.exports,"ByteStream",(()=>o));class o{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t)}getString(t){const e=this.data.slice(this.pos,this.pos+t);return this.pos+=e.length,e.reduce(((t,e)=>t+String.fromCharCode(e)),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let t="",e=0;do{e=this.data[this.pos++];for(let a=e;--a>=0;t+=String.fromCharCode(this.data[this.pos++]));}while(0!==e);return t}readSubBlocksBin(){let t=this.data[this.pos],e=0;for(let a=0;0!==t;a+=t+1,t=this.data[this.pos+a])e+=t;const a=new Uint8Array(e);t=this.data[this.pos++];for(let e=0;0!==t;t=this.data[this.pos++])for(let o=t;--o>=0;a[e++]=this.data[this.pos++]);return a}skipSubBlocks(){for(const t=1,e=0;this.data[this.pos]!==e;this.pos+=this.data[this.pos]+t);this.pos++}}}));
//# sourceMappingURL=Utils.ff200915.js.map
