var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire6158;e.register("1bMSc",(function(a,i){var t,n,o,s;t=a.exports,n="ImageDrawer",o=()=>h,Object.defineProperty(t,n,{get:o,set:s,enumerable:!0,configurable:!0});var l=e("i0lBz"),r=e("asyfB"),g=e("bbgOK");class h{constructor(e){this.loadImageShape=async e=>{if(!this._engine.loadImage)throw new Error(`${l.errorPrefix} image shape not initialized`);await this._engine.loadImage({gif:e.gif,name:e.name,replaceColor:e.replaceColor??!1,src:e.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e){const{context:a,radius:i,particle:t,opacity:n}=e,o=t.image,s=o?.element;if(o){if(a.globalAlpha=n,o.gif&&o.gifData)(0,g.drawGif)(e);else if(s){const e=o.ratio,t={x:-i,y:-i},n=2*i;a.drawImage(s,t.x,t.y,n,n/e)}a.globalAlpha=1}}getSidesCount(){return 12}async init(e){const a=e.actualOptions;if(a.preload&&this._engine.loadImage)for(const e of a.preload)await this._engine.loadImage(e)}loadShape(e){if("image"!==e.shape&&"images"!==e.shape)return;this._engine.images||(this._engine.images=[]);const a=e.shapeData;if(!a)return;this._engine.images.find((e=>e.name===a.name||e.source===a.src))||this.loadImageShape(a).then((()=>{this.loadShape(e)}))}particleInit(e,a){if("image"!==a.shape&&"images"!==a.shape)return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,t=a.shapeData;if(!t)return;const n=a.getFillColor(),o=i.find((e=>e.name===t.name||e.source===t.src));if(!o)return;const s=t.replaceColor??o.replaceColor;o.loading?setTimeout((()=>{this.particleInit(e,a)})):(async()=>{let e;e=o.svgData&&n?await(0,r.replaceImageColor)(o,t,n,a):{color:n,data:o,element:o.element,gif:o.gif,gifData:o.gifData,gifLoopCount:o.gifLoopCount,loaded:!0,ratio:t.width&&t.height?t.width/t.height:o.ratio??1,replaceColor:s,source:t.src},e.ratio||(e.ratio=1);const i={image:e,fill:t.fill??a.shapeFill,close:t.close??a.shapeClose};a.image=i.image,a.shapeFill=i.fill,a.shapeClose=i.close})()}}}));
//# sourceMappingURL=ImageDrawer.87388268.js.map
